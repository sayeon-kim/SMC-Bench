# SMC 2번

#### Control flow modification

la는 명령어 주소를 Load한다.

lw는 명령어에 대한 Hex Code를 Load한다.


```assembly
	.text
	j main	
halt:	
	j halt

main:	
	la $9, end  
        lw $8, 0($9)
        addi $8, $8, -1
        addi $8, $8, -2
        sw $8, 0($9)
end:	
	j dead
	
dead:


```

코드를 봤을때 드는 생각은 dead로 분기했을때 유효한 명령어가 없기때문에 프로그램이 비정상 종료될것이라는것을 알 수 있다.

```assembly
la $9, end
```
해당 코드에서 $9에 end의 메모리 주소를 저장한다.

```assembly
lw $8, 0($9)
```
end의 메모리주소는 0x00400020인데  여기서 0을 더한 명령어코드를 lw에 저장한다.

즉 j dead에 대한 명령어가 $8에 저장됨.  j dead명령어는 0x08100009인데

이 기계어를 분석해보면 맨뒤값이 명령어의 순서에 해당함.

즉 0x08100009는 10번째 명령어로 분기하라는 명령어이고, 여기서 3을뺀뒤보면 7번째 명령어로 분기하라는 명령어의 기계어 코드가 생김 (0x08100006) 

7번째 명령어는  아래에서 보다시피 addi $8 $8 -2이고, 여기서 2를 또 빼므로 4번째 명령어로 가라고하는 (0x08100004)가 생기게 되고, 여기서 또 3을빼면 두번째 명령어(0x08100001)즉, 프로그램의 종료 명령어인 j halt로 이동하게된다.